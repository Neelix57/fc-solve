#!/usr/bin/perl

use strict;
use warnings;

use Test::More tests => 2;
use Test::Differences qw( eq_or_diff );

# These results were tested with this commit:
#
# commit 03a8a42faae4a172a70e73651189576322445e12
# Author: Shlomi Fish <shlomif@shlomifish.org>
# Date:   Fri Mar 28 21:52:36 2014 +0300
#
# They may change later.

{
    # TEST
    eq_or_diff(
        scalar(`$^X analyze.pl`),
        <<'EOF',
The indexes of the tests above 2000 are:
1941: 2321,5937,5990,6001,6074,13886,22908,27468,81452,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
6240: 6584,9998,11087,12690,18003,20955,26461,28290,29905,33594,43325,44988,55065,59703,63960,79173,79174,84062,87032,-1,-1,-1,-1,-1
6365: 2239,5565,8236,9288,11521,13648,20604,25994,26778,27827,28119,37511,37839,40146,50108,-1,-1,-1,-1,-1,-1,-1,-1,-1
10692: 2519,3563,3643,3673,3681,4058,5123,5840,6792,11805,12015,12209,18536,32500,40672,45794,77409,-1,-1,-1,-1,-1,-1,-1
11982: -2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1
27799: 5942,6421,11146,11964,16824,19039,25906,29734,29873,31202,50358,97055,97677,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
31465: 2845,15898,23136,23357,35831,35948,36750,37126,61135,61368,61382,67594,72173,79220,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1
EOF
        'analyze.pl with no arguments yields right results.',
    );
}

{
    # TEST
    eq_or_diff(
        scalar(`$^X analyze.pl 500`),
        <<'EOF',
The indexes of the tests above 500 are:
617: 529,1063,1692,1744,1851,1993,2475,2498,2624,3399,3482,3764,4761,8212,9903,15401,15752,18231,21478,26466,32115,37337,58373,83792
917: 646,1042,3221,4070,5782,8044,9455,10016,12165,16400,17669,21131,65313,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
988: 556,561,704,756,832,1426,1458,1488,1615,1868,1883,1939,2268,2349,2472,4931,6283,6298,7136,17483,21636,22487,42699,46714
1136: 867,997,2255,3662,3781,3859,6237,9744,10277,14211,14226,14711,14738,14745,14918,15097,15408,-1,-1,-1,-1,-1,-1,-1
1941: 2321,5937,5990,6001,6074,13886,22908,27468,81452,-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
2696: 901,1172,1822,1948,2109,2208,2319,2775,2777,2876,3159,4112,4116,4129,4291,5353,5357,5411,6724,6739,6743,7279,11779,13131
3289: 775,794,823,913,971,1293,1353,2071,2243,2672,2963,3703,3840,4409,4485,4512,4534,4625,4678,6006,12433,17071,52671,-1
3294: 716,1379,1823,2633,2706,3443,3983,7618,9258,11382,13325,25383,49068,55874,75076,77555,84843,84886,-1,-1,-1,-1,-1,-1
3496: 1123,1277,1308,1896,2431,2433,2488,3939,12033,28456,68320,69996,70053,74731,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
4368: 520,803,860,1019,1906,2508,2540,2951,4453,4669,4790,4886,7686,8164,8169,9030,9636,10995,11315,19173,19661,20105,25483,32948
4593: 552,736,890,1460,1478,1623,1940,2862,2961,3576,3716,4321,4572,6061,7201,7397,7473,7478,9787,12983,20797,37137,-1,-1
6182: 726,824,942,1158,1745,2111,2138,2558,3072,4079,4236,5023,5138,5531,6610,10344,10351,10499,11269,12014,29703,32225,32360,38370
6240: 6584,9998,11087,12690,18003,20955,26461,28290,29905,33594,43325,44988,55065,59703,63960,79173,79174,84062,87032,-1,-1,-1,-1,-1
6257: 573,587,762,914,1788,1919,2598,2901,2984,3040,3101,3173,4401,5165,6826,7582,7794,30396,47995,67124,74914,86004,99965,-1
6365: 2239,5565,8236,9288,11521,13648,20604,25994,26778,27827,28119,37511,37839,40146,50108,-1,-1,-1,-1,-1,-1,-1,-1,-1
7303: 641,922,1124,1325,1749,1791,1852,2665,2884,3093,3908,4056,4980,5320,5844,6338,8854,9239,13339,15066,41020,42102,45100,-1
7724: 591,726,849,1003,1222,1274,1567,1592,1643,1710,2160,2162,2170,2170,2220,2298,2665,3168,4617,6715,7132,9291,14486,-1
7744: 534,535,780,912,983,1667,1800,3616,3724,5832,6658,10083,20234,42133,73913,80960,-1,-1,-1,-1,-1,-1,-1,-1
8461: 506,709,1031,1208,1275,1560,1835,2154,2240,2482,2713,3949,4117,9612,13508,19056,22659,25850,30668,32371,36915,38211,38510,38535
8733: 517,521,600,1071,1303,1780,2585,2634,2677,2733,3097,3416,4071,4924,4980,6003,6511,6555,6640,6650,15259,22423,99172,-1
9182: 953,1152,1793,2364,2754,3715,4262,4555,4776,8284,10129,10553,15059,27095,27716,29427,29804,29855,29945,29949,33768,37524,37770,38507
10660: 528,692,750,755,1769,2323,2678,3569,3598,3656,4908,5610,11033,11046,11518,19565,27660,34919,35075,37617,38983,44720,44759,48351
10692: 2519,3563,3643,3673,3681,4058,5123,5840,6792,11805,12015,12209,18536,32500,40672,45794,77409,-1,-1,-1,-1,-1,-1,-1
11496: 944,1267,1684,2588,2672,2688,2850,2918,3157,4511,6044,8165,8668,11979,19341,19858,20951,27520,46697,54947,81407,-1,-1,-1
11763: 578,660,934,1112,1566,1787,2056,2196,2756,2772,2876,2981,3062,3559,4210,4248,4404,5948,6068,13009,13614,16687,17600,20555
11819: 1091,1225,1225,1230,1405,1420,1438,2135,2148,2420,3430,3445,3552,4825,4869,5044,6695,7570,9133,9468,12551,16293,25573,65839
11982: -2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1
12056: 650,1036,1353,1436,1580,2082,2082,2368,2492,3469,4382,4695,5270,5342,5486,5590,6831,6920,7690,7975,9377,9793,10306,30282
12444: 509,738,867,1861,1988,2725,3219,3270,3450,3673,3794,4585,6553,8173,10906,25607,28547,61750,61814,74735,77400,-1,-1,-1
12548: 561,579,653,722,748,756,1213,1434,2078,3090,3502,3711,4272,5412,5423,5429,6640,6728,7400,14575,16406,-1,-1,-1
13304: 1205,1569,1799,4533,5660,5855,6898,7047,7770,8408,8633,8685,8760,8961,9209,9700,10711,14138,18389,19531,19650,25562,35721,35881
13551: 649,922,1021,1157,1238,1269,1408,1446,1453,1459,1478,1500,1546,1745,1967,2118,2151,2551,3208,6636,7349,26199,28069,39502
13996: 1199,5573,14199,16408,21511,27495,35809,39851,39965,52469,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
14212: 600,783,855,1524,2971,3643,3741,3749,4340,4769,6369,7777,7919,8055,8107,9907,10647,11179,12057,12514,14349,31899,38707,41333
14632: 595,1397,1549,2430,2431,5270,5426,5549,5822,6812,7615,10502,10767,12514,13768,13972,16340,41848,-1,-1,-1,-1,-1,-1
15010: 1499,1578,2235,2312,2336,3419,3522,4050,4277,4532,4695,5306,5803,6489,6980,8852,8877,9157,11673,13051,18115,19878,56004,-1
15451: 557,621,674,799,801,921,955,966,1155,1573,2010,2284,2937,2961,3564,4905,5121,5387,8088,13629,13679,26670,-1,-1
15592: 1392,1779,1896,2161,3260,10431,12817,18403,23431,34991,42869,43443,50082,53194,75661,87496,-1,-1,-1,-1,-1,-1,-1,-1
15742: 546,744,760,890,905,922,1130,1326,1436,1703,1825,1949,2197,2358,3728,4116,6287,6417,7461,26355,30328,48006,48517,74281
16039: 830,2452,2468,6951,8341,9057,9262,11478,12888,19165,21814,25306,26259,58803,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
16768: 607,634,2676,2855,2976,3592,6224,6644,9049,9307,10594,33209,33670,35951,38394,49469,87520,-1,-1,-1,-1,-1,-1,-1
17052: 697,1148,1430,2055,2644,6153,6179,7235,7875,8434,9071,9071,10478,10559,12092,17349,21796,26142,29393,30736,68509,75356,-1,-1
17227: 1196,1274,1362,1615,1693,1891,5980,7011,8000,8271,17307,32258,46661,59536,61554,62761,63959,81250,89359,-1,-1,-1,-1,-1
17355: 655,770,1044,1386,1389,1390,1410,1424,1898,2548,4259,4825,5343,5716,5855,7561,14528,21690,25297,47468,-1,-1,-1,-1
17880: 648,1400,1447,4232,4773,7686,9511,9781,9791,9891,13102,16684,21049,21768,25920,37568,41184,57762,74708,-1,-1,-1,-1,-1
18972: 601,1798,2464,2781,4523,4672,6153,6419,11700,14997,24555,24815,27588,27723,29837,34569,38523,-1,-1,-1,-1,-1,-1,-1
20021: 601,946,959,961,1037,1043,1045,1067,1357,1397,1515,1583,1633,2020,2121,2150,2405,2562,4378,6125,9268,10512,11075,12007
20418: 546,674,715,758,1014,1033,1040,1040,1102,1143,1156,1284,1463,1878,2146,2832,2919,3480,3712,11278,13264,13266,13411,17388
21491: 1819,2131,2538,4053,5369,7522,8274,8365,8533,10721,11267,12121,13682,24191,32041,32659,33049,33441,33603,33604,33828,34406,35207,39257
21899: 1818,2129,2130,2372,2471,3119,7253,7676,7722,7732,8018,8057,9929,13452,22406,34891,43718,61207,61881,-1,-1,-1,-1,-1
22894: 702,1459,1877,3562,3703,4724,6204,7239,9093,14166,16224,20320,22835,25215,27257,32634,50040,54445,56306,64558,66514,-1,-1,-1
23245: 618,1473,2989,3049,3050,3077,3258,3569,3926,3974,4012,4076,4368,4501,4805,6222,10076,12178,12334,19239,25431,-1,-1,-1
23717: 602,844,921,1314,1625,1672,2059,2097,3771,4101,4437,5947,6841,7086,9355,9437,12269,16175,18110,19134,30419,31316,35467,46596
24104: 544,701,795,863,1030,1067,1392,1714,1840,2320,2538,3114,4844,5003,6864,8963,8981,8983,9803,12400,15032,15102,35004,56993
24106: 579,689,710,955,1069,2831,13849,29051,29154,29188,29932,31512,32200,32425,32986,33974,34223,34625,69266,70477,-1,-1,-1,-1
24161: 609,616,629,712,1022,1350,1392,1527,1853,2110,2140,2340,2398,2398,2473,2486,2508,2755,3245,3482,4189,5948,6363,7678
24341: 576,1957,2083,2650,3904,4268,5102,5378,5398,5547,10853,11100,13312,13601,20357,23510,29305,29458,32062,47893,-1,-1,-1,-1
25146: 718,841,1049,1353,2101,2276,3669,3695,4097,18672,19575,25932,45419,73707,74736,76406,99065,-1,-1,-1,-1,-1,-1,-1
25315: 740,3348,5488,8042,8527,9230,11118,13101,13402,17993,22599,24763,24951,25228,25387,25661,29013,36951,46345,64180,64227,71990,88993,-1
25463: 556,1362,3026,3058,5690,7650,8602,8768,9891,9964,12131,13073,14253,24714,54336,55104,78156,93620,-1,-1,-1,-1,-1,-1
25498: 801,860,1394,1781,1783,1785,1947,4826,5232,5998,6453,8737,19388,27088,39010,43205,49966,77924,-1,-1,-1,-1,-1,-1
25599: 532,538,581,897,1360,1724,2075,2295,2510,3348,4549,5354,5831,6337,7259,9924,18581,22275,35816,41670,43176,43211,43279,45635
25995: 844,981,1665,1669,2039,2113,2185,2828,2876,3760,3978,3994,4682,6237,7864,9394,13894,14104,21751,21753,23188,23886,24119,70433
27738: 687,719,841,1254,3209,5620,5707,5735,5899,10004,10228,10332,10693,25064,48228,60371,65880,73356,-1,-1,-1,-1,-1,-1
27799: 5942,6421,11146,11964,16824,19039,25906,29734,29873,31202,50358,97055,97677,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
28529: 595,621,734,803,1498,1593,1772,2500,2773,3152,3588,3639,4062,4124,6254,14873,17086,20903,28710,40511,40562,44897,-1,-1
28650: 570,605,740,872,1038,1304,1740,2054,3459,3582,3987,4400,4551,10747,11390,24744,24787,30304,75085,91919,-1,-1,-1,-1
28920: 1540,3163,3178,3870,3937,4000,4340,5866,5870,7283,8181,12319,13841,13947,13949,13967,14126,14317,15355,15639,16206,17068,18880,23217
29218: 575,4562,5951,6267,10875,18955,21858,26457,33217,45567,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
29999: 523,597,653,704,723,1205,1694,1858,2254,2469,2870,2876,3537,11492,12688,15665,16313,19569,19603,37158,73841,82963,-1,-1
30090: 569,1109,1131,1404,2342,2807,3296,4911,5104,5281,6387,10817,10967,19875,21253,33154,37973,-1,-1,-1,-1,-1,-1,-1
30143: 552,588,847,1456,1607,3554,3598,4591,5821,7462,8710,10931,13758,25930,33485,46584,50994,53905,55063,58889,73128,-1,-1,-1
30359: 798,1194,3253,3269,3666,3726,3863,4923,6744,20954,69854,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1
30504: 514,773,809,830,1259,1515,1559,1657,1979,2173,2598,3318,3640,4540,4794,5120,5900,7802,11911,13646,-1,-1,-1,-1
31329: 516,554,573,670,1521,1762,1795,1852,2029,2126,2262,2926,4306,5713,10068,14550,20526,25629,47357,58130,59276,70235,-1,-1
31465: 2845,15898,23136,23357,35831,35948,36750,37126,61135,61368,61382,67594,72173,79220,-2,-2,-2,-2,-2,-2,-1,-1,-1,-1
31772: 502,510,544,910,978,1624,1810,1909,2710,3087,4160,4310,4310,4315,4325,7474,7509,9084,12452,14234,19699,20571,36714,90791
EOF
        'analyze.pl with no arguments yields right results.',
    );
}
